<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="keywords" content="">
<meta name="description" content="">
<title>直播大厅</title>
<link rel="stylesheet" type="text/css" href="../css/base.css">
<link rel="stylesheet" type="text/css" href="../css/index.css">
</head>

<body>

<div class="main">

    <div class="left_bar">
        <ul class="left_bar_list">
            <li class="l_hot current">
                <div class="li_content">
                    <em class="l_hot_em"></em><a class="l_a_v1" href="javascript:;">热门推荐</a>
                </div>
            </li>
            <li class="l_etm">
                <div class="li_content">
                    <em class="l_etm_em"></em><a class="l_a_v1" href="javascript:;">娱乐直播</a>
                </div>
            </li>
            <li class="has_l_2 l_game">
                <div class="li_content">
                    <em class="l_game_em"></em><a class="l_a_v1" href="javascript:;">游戏直播</a><i></i>
                </div>
                <div class="l_2_list">
                    <a href="javascript:;">全部</a>
                    <a href="javascript:;">梦幻西游</a>
                    <a href="javascript:;">天下</a>
                    <a href="javascript:;">大话西游</a>
                    <a href="javascript:;">武魂</a>
                    <a href="javascript:;">倩女幽魂</a>
                    <a href="javascript:;">炉石传说</a>
                    <a href="javascript:;">其他</a>
                </div>
            </li>
            <li class="l_voice">
                <div class="li_content">
                    <em class="l_voice_em"></em><a class="l_a_v1" href="javascript:;">语音电台</a>
                </div>
            </li>
            <li class="l_rank">
                <div class="li_content">
                    <em class="l_rank_em"></em><a class="l_a_v1" href="javascript:;">排行榜</a>
                </div>
            </li>
            <li class="l_subscibe">
                <div class="li_content">
                    <em class="l_subscibe_em"></em><a class="l_a_v1" href="javascript:;">我的订阅</a>
                </div>
            </li>
        </ul>
    </div>

    <div class="content">
        <div id="picwall">
            <ul class="picwall_ul picwall_ul_left">
                <li>
                    <img src="../image/test/test.png">
                    <div class="detail">
                        <div class="picwall_follow_img"><img width=166 height=166 src="../image/test/test.png"></div>
                        <p><em class="a_level"><img src="../image/anchorLevel/59.png" /></em><span class="a_name">神谕者联盟</span></p>
                        <p><em class="a_type a_video"></em><span class="a_people"><i></i>12345</span></p>
                    </div>
                </li>
                <li>
                    <img src="../image/test/test2.png">
                    <div class="detail">
                        <div class="picwall_follow_img"><img width=166 height=166 src="../image/test/test2.png"></div>
                        <p><em class="a_level"><img src="../image/anchorLevel/59.png" /></em><span class="a_name">神谕者联盟</span></p>
                        <p><em class="a_type a_video"></em><span class="a_people"><i></i>fdasfdsaf</span></p>
                    </div>
                </li>
                <li>
                    <img src="../image/test/test2.png">
                    <div class="detail">
                        <div class="picwall_follow_img"><img width=166 height=166 src="../image/test/test2.png"></div>
                        <p><em class="a_level"><img src="../image/anchorLevel/59.png" /></em><span class="a_name">神谕者联盟</span></p>
                        <p><em class="a_type a_video"></em><span class="a_people"><i></i>eqwrewqrewq</span></p>
                    </div>
                </li>
                <li>
                    <img src="../image/test/test.png">
                    <div class="detail">
                        <div class="picwall_follow_img"><img width=166 height=166 src="../image/test/test.png"></div>
                        <p><em class="a_level"><img src="../image/anchorLevel/59.png" /></em><span class="a_name">神谕者联盟</span></p>
                        <p><em class="a_type a_video"></em><span class="a_people"><i></i>vczvcxzvcxz</span></p>
                    </div>
                </li>
                <li>
                    <img src="../image/test/test.png">
                    <div class="detail">
                        <div class="picwall_follow_img"><img width=166 height=166 src="../image/test/test.png"></div>
                        <p><em class="a_level"><img src="../image/anchorLevel/59.png" /></em><span class="a_name">神谕者联盟</span></p>
                        <p><em class="a_type a_video"></em><span class="a_people"><i></i>12345</span></p>
                    </div>
                </li>
                <li>
                    <img src="../image/test/test2.png">
                    <div class="detail">
                        <div class="picwall_follow_img"><img width=166 height=166 src="../image/test/test2.png"></div>
                        <p><em class="a_level"><img src="../image/anchorLevel/59.png" /></em><span class="a_name">神谕者联盟</span></p>
                        <p><em class="a_type a_video"></em><span class="a_people"><i></i>12345</span></p>
                    </div>
                </li>
            </ul>
            
            <div id="picwall_banner">
                <div class="focus focus1">
                    <div class="focus_img_bar"></div>
                    <div class="focus_control"></div>
                    <div class="focus_run f_left"></div>
                    <div class="focus_run f_right"></div>
                </div>
            </div>
            
            <ul class="picwall_ul picwall_ul_right">
                <li>
                    <img src="../image/test/test.png">
                    <div class="detail">
                        <div class="picwall_follow_img"><img width=166 height=166 src="../image/test/test.png"></div>
                        <p><em class="a_level"><img src="../image/anchorLevel/59.png" /></em><span class="a_name">神谕者联盟</span></p>
                        <p><em class="a_type a_video"></em><span class="a_people"><i></i>12345</span></p>
                    </div>
                </li>
                <li>
                    <img src="../image/test/test.png">
                    <div class="detail">
                        <div class="picwall_follow_img"><img width=166 height=166 src="../image/test/test.png"></div>
                        <p><em class="a_level"><img src="../image/anchorLevel/59.png" /></em><span class="a_name">神谕者联盟</span></p>
                        <p><em class="a_type a_video"></em><span class="a_people"><i></i>12345</span></p>
                    </div>
                </li>
                <li>
                    <img src="../image/test/test.png">
                    <div class="detail">
                        <div class="picwall_follow_img"><img width=166 height=166 src="../image/test/test.png"></div>
                        <p><em class="a_level"><img src="../image/anchorLevel/59.png" /></em><span class="a_name">神谕者联盟</span></p>
                        <p><em class="a_type a_video"></em><span class="a_people"><i></i>12345</span></p>
                    </div>
                </li>
                <li>
                    <img src="../image/test/test.png">
                    <div class="detail">
                        <div class="picwall_follow_img"><img width=166 height=166 src="../image/test/test.png"></div>
                        <p><em class="a_level"><img src="../image/anchorLevel/59.png" /></em><span class="a_name">神谕者联盟</span></p>
                        <p><em class="a_type a_video"></em><span class="a_people"><i></i>12345</span></p>
                    </div>
                </li>
                <li>
                    <img src="../image/test/test.png">
                    <div class="detail">
                        <div class="picwall_follow_img"><img width=166 height=166 src="../image/test/test.png"></div>
                        <p><em class="a_level"><img src="../image/anchorLevel/59.png" /></em><span class="a_name">神谕者联盟</span></p>
                        <p><em class="a_type a_video"></em><span class="a_people"><i></i>12345</span></p>
                    </div>
                </li>
                <li id="picwall_refresh"></li>
            </ul>
            <div id="picwall_follow"></div>
        </div>
        
        <div class="list_area">
        	<div class="list_top"></div>
            <div class="list_content">
            	<ul class="list_content_ul clearfix">
                	<li>
                    	<img width=155 height=116 src="../image/test/test.png" />
                        <div class="list_bottom">
                        	<div class="lb1"><i></i><span>15926</span></div>
                        	<div class="lb2"><em><img src="../image/anchorLevel/59.png" /></em><span>小神谕者</span></div>
                        </div>
                        <a href="javascript:;" class="list_go rotateInAnimation"><i></i></a>
                    </li>
                    <li>
                    	<img width=155 height=116 src="../image/test/test.png" />
                        <div class="list_bottom">
                        	<div class="lb1"><i></i><span>15926</span></div>
                        	<div class="lb2"><em><img src="../image/anchorLevel/59.png" /></em><span>小神谕者</span></div>
                        </div>
                        <a href="javascript:;" class="list_go"><i></i></a>
                    </li>
                    <li>
                    	<img width=155 height=116 src="../image/test/test.png" />
                        <div class="list_bottom">
                        	<div class="lb1"><i></i><span>15926</span></div>
                        	<div class="lb2"><em><img src="../image/anchorLevel/59.png" /></em><span>小神谕者</span></div>
                        </div>
                        <a href="javascript:;" class="list_go"><i></i></a>
                    </li>
                    <li>
                    	<img width=155 height=116 src="../image/test/test.png" />
                        <div class="list_bottom">
                        	<div class="lb1"><i></i><span>15926</span></div>
                        	<div class="lb2"><em><img src="../image/anchorLevel/59.png" /></em><span>小神谕者</span></div>
                        </div>
                        <a href="javascript:;" class="list_go"><i></i></a>
                    </li>
                    <li>
                    	<img width=155 height=116 src="../image/test/test.png" />
                        <div class="list_bottom">
                        	<div class="lb1"><i></i><span>15926</span></div>
                        	<div class="lb2"><em><img src="../image/anchorLevel/59.png" /></em><span>小神谕者</span></div>
                        </div>
                        <a href="javascript:;" class="list_go"><i></i></a>
                    </li>
                    <li>
                    	<img width=155 height=116 src="../image/test/test.png" />
                        <div class="list_bottom">
                        	<div class="lb1"><i></i><span>15926</span></div>
                        	<div class="lb2"><em><img src="../image/anchorLevel/59.png" /></em><span>小神谕者</span></div>
                        </div>
                        <a href="javascript:;" class="list_go"><i></i></a>
                    </li>
                    <li>
                    	<img width=155 height=116 src="../image/test/test.png" />
                        <div class="list_bottom">
                        	<div class="lb1"><i></i><span>15926</span></div>
                        	<div class="lb2"><em><img src="../image/anchorLevel/59.png" /></em><span>小神谕者</span></div>
                        </div>
                        <a href="javascript:;" class="list_go"><i></i></a>
                    </li>
                    <li>
                    	<img width=155 height=116 src="../image/test/test.png" />
                        <div class="list_bottom">
                        	<div class="lb1"><i></i><span>15926</span></div>
                        	<div class="lb2"><em><img src="../image/anchorLevel/59.png" /></em><span>小神谕者</span></div>
                        </div>
                        <a href="javascript:;" class="list_go"><i></i></a>
                    </li>
                    <li>
                    	<img width=155 height=116 src="../image/test/test.png" />
                        <div class="list_bottom">
                        	<div class="lb1"><i></i><span>15926</span></div>
                        	<div class="lb2"><em><img src="../image/anchorLevel/59.png" /></em><span>小神谕者</span></div>
                        </div>
                        <a href="javascript:;" class="list_go"><i></i></a>
                    </li>
                    <li>
                    	<img width=155 height=116 src="../image/test/test.png" />
                        <div class="list_bottom">
                        	<div class="lb1"><i></i><span>15926</span></div>
                        	<div class="lb2"><em><img src="../image/anchorLevel/59.png" /></em><span>小神谕者</span></div>
                        </div>
                        <a href="javascript:;" class="list_go"><i></i></a>
                    </li>
                    <li>
                    	<img width=155 height=116 src="../image/test/test.png" />
                        <div class="list_bottom">
                        	<div class="lb1"><i></i><span>15926</span></div>
                        	<div class="lb2"><em><img src="../image/anchorLevel/59.png" /></em><span>小神谕者</span></div>
                        </div>
                        <a href="javascript:;" class="list_go"><i></i></a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
	
    <div class="right_bar">
    
    </div>
</div>

<!--<script data-main="../js/index" src="../js/lib/require.js"></script>-->
    
<script type="text/javascript" src="../js/lib/jquery.js"></script>
<script type="text/javascript" src="../js/base.js"></script>
<script type="text/javascript">

$(function(){
	
	$('.left_bar_list .li_content').live('click',function(){
		
		$('.left_bar_list li').removeClass('current');
		
		if($(this).parent().hasClass('has_l_2')){
			var nowList = $(this).parent().find('.l_2_list');
			var nowListA = $(this).parent().find('.l_2_list a');
			var nowSelect = false;
			$('.left_bar_list li .l_2_list').slideUp(200);
			if(nowList.css('display') != 'block'){
				nowList.slideDown(200);
			}else{
				$(this).parent().addClass('current');
			}
			for(var i=0; i<nowListA.length; i++){
				if(nowListA.eq(i).hasClass('current')){
					nowSelect = true;
					break;
				}
			}
			if(!nowSelect){
				$(this).parent().addClass('current');
			}
		}else{
			$('.left_bar_list li .l_2_list a').removeClass('current');
			$('.left_bar_list li .l_2_list').slideUp(200);
			$(this).parent().addClass('current');
		}
	});
	
	$('.left_bar_list .l_2_list a').live('click',function(){
		$(this).parent().parent().removeClass('current');
		$('.left_bar_list .l_2_list a').removeClass('current');
		$(this).addClass('current');
	});
	
	$(".list_content_ul li").live('mouseover mouseout', function(event) {
		if(event.type == 'mouseover') {
			$(this).find('.list_go').show();
		} else {
			$(this).find('.list_go').hide();
		}
	});
	
	var indexPicWall = new picWall();
	showBanner();
	
});

function picWall(){
	var picWall = {
		init : function(){
			this.box = $('#picwall');
			this.follow = $('#picwall_follow');
			this.list_pic = $('#picwall .picwall_ul li').not('#picwall_refresh');
			this.list_refresh = $('#picwall_refresh');
			this.addHoverEvent();
		},
		addHoverEvent : function(){
			var _this = this;
			this.list_pic.mouseover(function(e){
				_this.follow.html($(this).find('.detail').html());
			}).mouseout(function(e){
				_this.follow.stop().animate({
					opacity: 0
				},200,
				function() {
					$(this).hide();
				});
			}).mousemove(function(e){
				_this.showPop(e, this)
			});
		},
		showPop : function(e , o){
			var posY = e.pageY - this.box.offset().top;
			var posX = e.pageX - this.box.offset().left;
			this.follow.css({
				left: posX + 10,
				top: posY + 10,
				display: 'block'
			}).stop().animate({
				opacity: 1
			},100);
		}
	};
	return picWall.init();
}

function C_focus(cName){
	var focusNow = 0;
	this.focusObj = $('.' + cName);
	this.focusCtrHtml = '<em class="current"></em>';
	this.focusImgs = $('.'+ cName +' .imgbox');
	this.focusLen = $('.'+ cName +' .imgbox').length;
	this.focusPerWidth = this.focusObj.width();
	var _timer = null;
	var _this = this;
	// banner 初始化
	this.init = function(){
		this.addCtr();
		this.addEvent();
		this.autoScroll();
	};
	// banner 添加底部control
	this.addCtr = function(){
		for(var i=1; i<this.focusLen; i++){
			this.focusCtrHtml += '<em></em>';
		}
		this.focusObj.find('.focus_control').html(this.focusCtrHtml);
		this.focusObj.find('.focus_img_bar').width(this.focusLen * this.focusPerWidth);
	};
	// banner 绑定操作事件
	this.addEvent = function(){
		this.focusObj.mouseover(function(){
			$(this).find('.focus_run').show();
			clearInterval(_timer);
		}).mouseout(function(){
			$(this).find('.focus_run').hide();
			_this.autoScroll();
		});
		
		this.focusObj.find('.focus_control em').live('click',function(o){
			focusNow = $(this).index();
			_this.move(focusNow,0);
		});
		
		this.focusObj.find('.focus_run').live('click',function(o){
			if($(this).hasClass('f_left')){
				focusNow --;
				_this.move(focusNow,-1);
			}else{
				focusNow ++;
				_this.move(focusNow,1);
			}
		});
	};
	// banner 自动轮播
	this.autoScroll = function(){
		_timer = setInterval(function(){
			focusNow ++ ;
			_this.move(focusNow,1);
		},4000);
	};
	// banner 轮播的动作
	this.move = function(index,type){
		if(type == -1 && index == -1){
			focusNow = this.focusLen - 1;
			this.focusObj.find('.focus_img_bar').animate({'left': - (this.focusLen-1) * this.focusPerWidth + 'px'},300);
		}else if(type == 1 && index == this.focusLen){
			focusNow = 0;
			this.focusObj.find('.focus_img_bar').animate({'left':'0px'},300);
		}else{
			this.focusObj.find('.focus_img_bar').animate({'left': - index * this.focusPerWidth + 'px'},300);
		}
		setTimeout(function(){
			_this.focusObj.find('.focus_control em').removeClass('current').eq(focusNow).addClass('current');
		},200);
	};
	
	this.init();
}

function showBanner(){
	// 获取banner图
	$.ajax({
		type: 'get',  
		async: false,  
		url: httpRqHost + '/banner/list_cb',  
		dataType: 'jsonp',  
		success: function(data){  
			addToBanner(data);
		},  
		error: function(){  
			alert('获取banner失败');  
		}
	});
	// 添加到banner容器并执行轮播
	function addToBanner(data){
		var bannerHtml = '';
		if(data.data != null && data.data.length > 0){
			for(var i=0; i<data.data.length; i++){
				bannerHtml += '<a class="imgbox" target="_blank" title="'+ data.data[i].title +'" href="'+ data.data[i].link +'"><img src="'+ data.data[i].pic +'" alt="banner" width="290" height="320" /></a>';
			}
		}else{
			alert('banner为空'); 
		}
		$(".focus_img_bar").html(bannerHtml);
		var bannerFocus1 = new C_focus('focus1');
	}
}

</script>
</body>
</html>
